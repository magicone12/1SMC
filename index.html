<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multi Channel Live</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.compiled.js"></script>
<style>
html, body { margin:0; height:100%; background:#000; }
#channelSelect { position:fixed; inset:0; display:grid; grid-template-columns: repeat(auto-fill, 140px); gap:20px; align-content:start; padding:20px; background:#111; overflow-y:auto; }
.channelBtn { width:140px; height:140px; border-radius:12px; background:#000; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 0 10px rgba(255,255,255,.15); transition: transform 0.2s; }
.channelBtn:hover { transform: scale(1.05); }
.channelBtn img { max-width:85%; max-height:85%; border-radius:8px; }
#playerContainer { position:fixed; inset:0; display:none; }
video { width:100%; height:100%; object-fit:contain; background:#000; }
#liveBadge { position:absolute; top:14px; left:14px; background:#d00000; color:#fff; font-size:12px; padding:6px 10px; border-radius:4px; font-weight:bold; letter-spacing:.5px; display:flex; align-items:center; gap:6px; }
#dot { width:8px; height:8px; background:#fff; border-radius:50%; animation:pulse 1.2s infinite; }
@keyframes pulse { 0%{opacity:1} 50%{opacity:.3} 100%{opacity:1} }
</style>
</head>
<body>

<div id="channelSelect">
  <div class="channelBtn" data-manifest="https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_sarisari/default/index.mpd" data-key="0a7ab3612f434335aa6e895016d8cd2d:b21654621230ae21714a5cab52daeb9d"><img src="https://static.wikia.nocookie.net/russel/images/e/ec/Sari-Sari_Channel_2D_Logo_2016.png/revision/latest?cb=20190317023940"></div>
  <div class="channelBtn" data-manifest="https://qp-pldt-live-bpk-01-prod.akamaized.net/bpk-tv/cg_ptv4_sd/default/index.mpd" data-key="71a130a851b9484bb47141c8966fb4a3:ad1f003b4f0b31b75ea4593844435600"><img src="https://static.wikia.nocookie.net/russel/images/d/dc/PTV_4_Para_Sa_Bayan_Alternative_Logo_June_2017.png/revision/latest?cb=20171019065428"></div>
  <div class="channelBtn" data-manifest="https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/onenews_hd1/default/index.mpd" data-key="d39eb201ae494a0b98583df4d110e8dd:6797066880d344422abd3f5eda41f45f"><img src="https://i.imgur.com/bpRiu54.png"></div>
  <div class="channelBtn" data-manifest="https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cnn_rptv_prod_hd/default/index.mpd" data-key="1917f4caf2364e6d9b1507326a85ead6:a1340a251a5aa63a9b0ea5d9d7f67595"><img src="https://static.wikia.nocookie.net/russel/images/f/fb/RPTV_Alternative_Logo_2024.png/revision/latest?cb=20240305140432"></div>
  <div class="channelBtn" data-manifest="https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/tv5_hd/default1/index.mpd" data-key="2615129ef2c846a9bbd43a641c7303ef:07c7f996b1734ea288641a68e1cfdc4d"><img src="https://static.wikia.nocookie.net/russel/images/7/7a/TV5_HD_Logo_2024.png/revision/latest/scale-to-width-down/290?cb=20240202141126"></div>
  <div class="channelBtn" data-manifest="https://qp-pldt-live-bpk-02-prod.akamaized.net/bpk-tv/cg_a2z/default/index.mpd" data-key="f703e4c8ec9041eeb5028ab4248fa094:c22f2162e176eee6273a5d0b68d19530"><img src="https://static.wikia.nocookie.net/russel/images/8/85/A2Z_Channel_11_without_Channel_11_3D_Logo_2020.png/revision/latest?cb=20231101144828"></div>
</div>

<div id="playerContainer">
  <div id="liveBadge"><span id="dot"></span>LIVE</div>
  <video id="video" autoplay playsinline muted></video>
</div>

<script>
const video = document.getElementById('video');
const playerContainer = document.getElementById('playerContainer');
let player;
let loaded = false;

async function initPlayer(manifest, key) {
  if (player) {
    player.destroy();
  }
  player = new shaka.Player(video);
  const [kid, kvalue] = key.split(':');
  player.configure({
    drm: { clearKeys: { [kid]: kvalue } },
    streaming: { lowLatencyMode:true, rebufferingGoal:0.5, bufferingGoal:6 }
  });
  try { await player.load(manifest); loaded = true; } catch(e){ console.error(e); }
}

document.querySelectorAll('.channelBtn').forEach(btn => {
  btn.addEventListener('click', async ()=>{
    const manifest = btn.dataset.manifest;
    const key = btn.dataset.key;
    document.getElementById('channelSelect').style.display='none';
    playerContainer.style.display='block';
    await initPlayer(manifest,key);
    try { await video.play(); } catch(e){}
    if(playerContainer.requestFullscreen) playerContainer.requestFullscreen().catch(()=>{});
    video.controls = false;
  });
});
</script>

</body>
</html>
